!function(){"use strict";var a=Ember.Component.extend({init:function(){Ember.assert("select2 has to exist on Ember.$.fn.select2",Ember.$.fn.select2),this._super()},tagName:"input",classNames:["select-component"],classNameBindings:["_inputSize"],attributeBindings:["disabled"],width:null,inputSize:null,optionValuePath:null,placeholder:null,multiple:!1,arrowDownIcon:"fa fa-angle-down",arrowUpIcon:"fa fa-angle-up",searchable:!0,minimumResultsForSearch:3,_inputSize:function(){switch(this.get("inputSize")){case"small":case"sm":return"input-sm";case"large":case"lg":return"input-lg";default:return""}}.property("inputSize"),didInsertElement:function(){var a=this,b={},c=Ember.get;b.placeholder=this.get("placeholder"),b.multiple=this.get("multiple"),b.minimumResultsForSearch=this.get("searchable")?this.get("minimumResultsForSearch"):-1,b.width=this.get("width"),b.formatResult=function(a){if(a){var b=c(a,"id"),d=c(a,"label"),e=c(a,"description"),f=Ember.Handlebars.Utils.escapeExpression(d);return b&&e&&(f+=" <span class='text-muted'>"+Ember.Handlebars.Utils.escapeExpression(e)+"</span>"),f}},b.formatSelection=function(a){if(a){var b=c(a,"label");return Ember.Handlebars.Utils.escapeExpression(b)}},b.query=function(b){var d=this,e=a.get("content").reduce(function(a,e){var f=[];if(e.children&&(f=e.children.reduce(function(a,e){return d.matcher(b.term,c(e,"label"))&&a.push(e),a},[])),d.matcher(b.term,c(e,"label")))a.push(e);else if(f.length){var g=$.extend({},e,{children:f});a.push(g)}return a},[]);b.callback({results:e})},b.initSelection=function(b,d){var e=b.val(),f=a.get("content"),g=a.get("multiple"),h=a.get("optionValuePath");if(!e||!e.length)return d([]);Ember.assert("select2#initSelection has been called without an 'optionValuePath' set.",h);for(var i,j,k,l=e.split(","),m=[],n=f.length,o=l.length,p=0;n>p;p++)if(j=f[p],i=-1,j.children&&j.children.length)for(var q=0;q<j.children.length&&(k=j.children[q],i=l.indexOf(""+c(k,h)),-1!==i&&(m[i]=k,o--),0!==o);q++);else if(i=l.indexOf(""+c(j,h)),-1!==i&&(m[i]=j,o--),0===o)break;return 0===o?a._select.select2("readonly",!1):(a._select.select2("readonly",!0),Ember.warn("select2#initSelection was not able to map each '"+h+"' to an object from 'content'. The remaining keys are: "+l+". The input will be disabled until a) the desired objects is added to the 'content' array or b) the 'value' is changed.",!l.length)),d(g?m:m.get("firstObject"))},this._select=this.$().select2(b),this._select.on("change",function(){var b=a._select.select2("data");a.selectionChanged(b)}),this.get("arrowUpIcon")&&this.get("arrowDownIcon")&&this._replaceToggleIcon(),this._select.on("select2-open",function(){a._updateToggleIcon("up")}),this._select.on("select2-close",function(){a._updateToggleIcon("down")}),this.valueChanged()},willDestroyElement:function(){this._select.off("change"),this._select.select2("destroy")},selectionChanged:function(a){var b,c=this.get("multiple"),d=this.get("optionValuePath"),e=Ember.get;b=d?c?a.getEach(d):e(a,d):a,this.set("value",b)},valueChanged:function(){var a=this.get("value"),b=this.get("optionValuePath");b?this._select.select2("val",a):this._select.select2("data",a)}.observes("value"),contentChanged:function(){this.valueChanged()}.observes("content.@each"),$toggleIcon:null,_replaceToggleIcon:function(){var a=this._select.select2("container"),b=a.find(".select2-arrow"),c=b.find("b");c.remove(),b.append("<span class='dropdown-toggle-icon "+this.get("arrowDownIcon")+"'></span>"),this.set("$toggleIcon",b.find(".dropdown-toggle-icon").eq(0))},_updateToggleIcon:function(a){var b=this.get("arrowUpIcon"),c=this.get("arrowDownIcon"),d=this.get("$toggleIcon");"up"===a?(d.removeClass(c),d.addClass(b)):(d.removeClass(b),d.addClass(c))}});Ember.SelectComponent=a,Ember.Handlebars.helper("select-component",Ember.SelectComponent)}(this);